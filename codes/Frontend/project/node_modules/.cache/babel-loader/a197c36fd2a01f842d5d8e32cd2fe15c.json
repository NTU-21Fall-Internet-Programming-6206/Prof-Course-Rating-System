{"ast":null,"code":"import _slicedToArray from\"/Users/a.../Desktop/CI_6206/project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import TextField from\"@material-ui/core/TextField\";import{useState}from\"react\";import{useHistory}from\"react-router\";import'../../button.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();var clickSignin=function clickSignin(){if(username.length>0&&password.length>0){var user_signin={'username':username,'password':password};var request=new Request('http://34.126.85.190:8080/student/login',{method:\"POST\",body:JSON.stringify(user_signin),headers:{\"Origin\":\"http://34.126.85.190:80\",\"Accept\":\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){var temp=res.json();return temp;}).then(function(json){if(json.info==='Success'){alert('Log in success!');localStorage.setItem(\"Token\",json.token);localStorage.setItem(\"userName\",json.username);window.dispatchEvent(new Event('storage'));history.push('/dashboard');}else{alert('Your username or password is wrong');}console.log(json);console.log(localStorage.getItem('Token'));}).catch(function(error){console.log(error);});}else{alert('Please input username or password');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"signin-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Professor and Course Rating\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Welcome Back!\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Don't have account, Sign up!\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{name:\"username\",label:\"Username\",id:\"outlined-basic\",variant:\"outlined\",margin:\"normal\",onChange:function onChange(e){return setUsername(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{name:\"password\",label:\"Password\",type:\"password\",id:\"outlined-basic\",variant:\"outlined\",margin:\"normal\",onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"small green button\",onClick:clickSignin,children:\"Log in\"})]});}export default Login;","map":{"version":3,"sources":["/Users/a.../Desktop/CI_6206/project/src/home/login/index.js"],"names":["TextField","useState","useHistory","Login","username","setUsername","password","setPassword","history","clickSignin","length","user_signin","request","Request","method","body","JSON","stringify","headers","fetch","then","res","temp","json","info","alert","localStorage","setItem","token","window","dispatchEvent","Event","push","console","log","getItem","catch","error","e","target","value"],"mappings":"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","sourcesContent":["import TextField from \"@material-ui/core/TextField\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport '../../button.css'\n\nfunction Login() {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    let history = useHistory();\n\n    const clickSignin = () => {\n      if (username.length > 0 && password.length > 0) {\n      const user_signin = {'username': username, 'password': password}\n      const request = new Request('http://34.126.85.190:8080/student/login', {\n        method: \"POST\",\n        body: JSON.stringify(user_signin),\n        headers: {\n          \"Origin\": \"http://34.126.85.190:80\",\n          \"Accept\": \"application/json, text/plain, */*\",\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      fetch(request)\n        .then(res => {\n          let temp = res.json()\n          return temp\n        })\n        .then(json => {\n          if (json.info === 'Success') {\n            alert('Log in success!')\n            localStorage.setItem(\"Token\", json.token)\n            localStorage.setItem(\"userName\", json.username)\n            window.dispatchEvent(new Event('storage'))\n            history.push('/dashboard')\n          } else {\n            alert('Your username or password is wrong')\n          }\n          console.log(json)\n          console.log(localStorage.getItem('Token'))\n        })\n        .catch(error => {\n          console.log(error);\n        });\n      } else {\n        alert('Please input username or password')\n      }\n    }\n\n    return (\n      <div className=\"App\">\n        <div class = \"signin-header\">\n          <h1>Professor and Course Rating</h1>\n          <br></br>\n          <h3>Welcome Back!</h3>\n          <a href=\"/signup\">\n          Don't have account, Sign up!\n          </a>\n        </div>\n        <div>\n          <TextField\n            name=\"username\"\n            label=\"Username\"\n            id=\"outlined-basic\"\n            variant='outlined'\n            margin=\"normal\"\n            onChange={e => setUsername(e.target.value)}\n          />\n        </div> \n        <div>\n          <TextField\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"outlined-basic\"\n            variant='outlined'\n            margin=\"normal\"\n            onChange={e => setPassword(e.target.value)}\n          />\n        </div>\n        <button className=\"small green button\" onClick={clickSignin}>\n          Log in\n        </button>\n      </div>\n    );\n  }\n  \n  export default Login;"]},"metadata":{},"sourceType":"module"}